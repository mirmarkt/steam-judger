# Steam Game Library AI Analyzer

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€ä¸ªå…¨æ ˆé¡¹ç›®ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥ä»–ä»¬çš„ Steam IDï¼Œè·å–ä»–ä»¬æ‹¥æœ‰çš„æ¸¸æˆåˆ—è¡¨ï¼Œå¹¶åˆ©ç”¨ AI å¤§è¯­è¨€æ¨¡å‹ï¼ˆå½“å‰é…ç½®ä¸º DeepSeekï¼‰ç”Ÿæˆä¸€ä»½å…³äºä»–ä»¬æ¸¸æˆå“å‘³å’Œä¹ æƒ¯çš„â€œæ¯’èˆŒâ€é”è¯„ã€‚å‰ç«¯ä½¿ç”¨ Nuxt 3 æ„å»ºï¼Œåç«¯ API ä½¿ç”¨ Hono æ„å»ºå¹¶éƒ¨ç½²åœ¨ Cloudflare Workers ä¸Šï¼Œåˆ©ç”¨ Cloudflare KV è¿›è¡Œæ•°æ®ç¼“å­˜ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **è·å– Steam æ¸¸æˆåº“:** è¾“å…¥ 64 ä½ Steam IDï¼Œé€šè¿‡ Steam Web API è·å–ç”¨æˆ·å…¬å¼€çš„æ¸¸æˆåˆ—è¡¨å’Œæ¸¸ç©æ—¶é•¿ã€‚
*   **KV ç¼“å­˜:** å°†è·å–åˆ°çš„æ¸¸æˆæ•°æ®ç¼“å­˜åœ¨ Cloudflare KV ä¸­ï¼Œæœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œé¿å…é¢‘ç¹è¯·æ±‚ Steam APIã€‚
*   **AI é©±åŠ¨çš„ç©å®¶ç”»åƒ:** è°ƒç”¨ AI å¤§æ¨¡å‹ï¼ˆé€šè¿‡ OpenAI å…¼å®¹æ¥å£ï¼‰ï¼ŒåŸºäºç”¨æˆ·çš„æ¸¸æˆæ•°æ®ç”Ÿæˆä¸€ä»½å¹½é»˜ã€è®½åˆºä¸”å¯Œæœ‰æ´å¯ŸåŠ›çš„â€œé”è¯„â€ã€‚
*   **æµå¼å“åº”:** AI ç”Ÿæˆçš„è¯„ä»·å†…å®¹é€šè¿‡ Server-Sent Events (SSE) æµå¼ä¼ è¾“åˆ°å‰ç«¯ï¼Œæä¾›å³æ—¶åé¦ˆã€‚
*   **æ¨¡å‹ä¿¡æ¯æŸ¥è¯¢:** æä¾› API ç«¯ç‚¹ä»¥æŸ¥è¯¢å½“å‰åç«¯æ­£åœ¨ä½¿ç”¨çš„ AI æ¨¡å‹åç§°ã€‚
*   **å…¨æ ˆéƒ¨ç½²:** å‰åç«¯å‡è®¾è®¡ä¸ºéƒ¨ç½²åœ¨ Cloudflare å¹³å°ä¸Šï¼ˆPages + Workersï¼‰ã€‚

## ğŸš€ æŠ€æœ¯æ ˆ

*   **å‰ç«¯:** [Nuxt 3](https://nuxt.com/)
*   **åç«¯ API:** [Hono](https://hono.dev/)
*   **éƒ¨ç½²å¹³å°:** [Cloudflare Workers](https://workers.cloudflare.com/) (åç«¯), [Cloudflare Pages](https://pages.cloudflare.com/) (å‰ç«¯)
*   **ç¼“å­˜:** [Cloudflare KV](https://developers.cloudflare.com/kv/)
*   **AI æ¨¡å‹:** [DeepSeek API](https://platform.deepseek.com/) (é€šè¿‡ OpenAI SDK è°ƒç”¨)
*   **æ•°æ®æº:** [Steam Web API](https://steamcommunity.com/dev)

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²å®‰è£…ä»¥ä¸‹å·¥å…·å’Œæ‹¥æœ‰å¿…è¦çš„è´¦æˆ·/å¯†é’¥ï¼š

*   [Node.js](https://nodejs.org/) (å»ºè®®ä½¿ç”¨ LTS ç‰ˆæœ¬)
*   [pnpm](https://pnpm.io/) (æˆ– npm/yarn)
*   [Cloudflare Account](https://dash.cloudflare.com/sign-up)
*   [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/) (ç”¨äºéƒ¨ç½² Cloudflare Worker)
*   æœ‰æ•ˆçš„ [Steam Web API Key](https://steamcommunity.com/dev/apikey)
*   æœ‰æ•ˆçš„ [DeepSeek API Key](https://platform.deepseek.com/) (æˆ–å…¶ä»– OpenAI å…¼å®¹æ¨¡å‹çš„ API Key)
*   ä¸€ä¸ªæ‹¥æœ‰å…¬å¼€æ¸¸æˆåº“çš„ Steam è´¦æˆ·ï¼ˆç”¨äºæµ‹è¯•ï¼‰

## âš™ï¸ å®‰è£…ä¸é…ç½®

1.  **å…‹éš†ä»“åº“:**
    ```bash
    # å…‹éš†å‰ç«¯ä»“åº“
    git clone https://github.com/kutius/steam-judger.git

    # å…‹éš†åç«¯ä»“åº“
    git clone https://github.com/kutius/steam-judger-backend.git
    ```

2.  **å®‰è£…ä¾èµ–:**
    ```bash
    cd steam-judger
    pnpm install

    cd .. && cd steam-judger-backend
    pnpm install
    ```

3.  **é…ç½®åç«¯ç¯å¢ƒå˜é‡:**

    *   **æœ¬åœ°å¼€å‘:** åœ¨ *åç«¯é¡¹ç›®* ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.dev.vars` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
        ```ini
        STEAM_API_KEY="YOUR_STEAM_API_KEY"
        OPENAI_API_KEY="YOUR_DEEPSEEK_API_KEY"
        # MY_KV ç»‘å®šå°†åœ¨è¿è¡Œ wrangler dev æ—¶è‡ªåŠ¨æ¨¡æ‹Ÿæˆ–éœ€è¦æœ¬åœ°é…ç½®
        ```
    *   **Cloudflare éƒ¨ç½²:**
        *   ç™»å½• Cloudflare Dashboardã€‚
        *   å¯¼èˆªåˆ° Workers & Pages -> ä½ çš„ Worker -> Settings -> Variablesã€‚
        *   åœ¨ "Secret variables" ä¸‹æ·»åŠ  `STEAM_API_KEY` å’Œ `OPENAI_API_KEY`ï¼Œå¹¶å¡«å…¥ä½ çš„å¯†é’¥å€¼ã€‚
        *   KV Namespace Binding (`MY_KV`) éœ€è¦åœ¨ `wrangler.toml` æ–‡ä»¶ä¸­é…ç½®ï¼Œå¹¶åœ¨ Cloudflare ä¸Šåˆ›å»ºå¯¹åº”çš„ KV å‘½åç©ºé—´ã€‚

4.  **é…ç½® `wrangler.toml` (åç«¯):**
    ç¡®ä¿ `backend/wrangler.toml` æ–‡ä»¶é…ç½®æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯ `kv_namespaces` éƒ¨åˆ†ï¼Œéœ€è¦æŒ‡å®š `binding` ä¸º `"MY_KV"` å¹¶æä¾› Cloudflare ä¸Šçš„ `id`ã€‚
    ```toml
    # backend/wrangler.toml (ç¤ºä¾‹ç‰‡æ®µ)
    name = "steam-analyzer-backend"
    main = "src/index.ts"
    compatibility_date = "2023-10-30" # Or your desired date

    # KV Namespace Binding
    [[kv_namespaces]]
    binding = "MY_KV"
    id = "your_kv_namespace_id_from_cloudflare"
    # preview_id = "your_preview_kv_namespace_id" # Optional for wrangler dev preview
    ```

; 5.  **é…ç½®å‰ç«¯ç¯å¢ƒå˜é‡ (å¯é€‰):**
;     å¦‚æœå‰ç«¯éœ€è¦çŸ¥é“åç«¯çš„ URLï¼Œå¯ä»¥åœ¨ `frontend/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
;     ```env
;     # frontend/.env
;     # æœ¬åœ°å¼€å‘æ—¶æŒ‡å‘ Wrangler dev å¯åŠ¨çš„åœ°å€
;     NUXT_PUBLIC_API_BASE_URL=http://localhost:8787
;     # ç”Ÿäº§ç¯å¢ƒå¯ä»¥åœ¨ Cloudflare Pages çš„ç¯å¢ƒå˜é‡ä¸­è®¾ç½®
;     # NUXT_PUBLIC_API_BASE_URL=https://your-worker-url.workers.dev
;     ```
;     å¹¶åœ¨ Nuxt ä»£ç ä¸­ä½¿ç”¨ `useRuntimeConfig().public.apiBaseUrl` è·å–ã€‚

## â–¶ï¸ æœ¬åœ°è¿è¡Œ

1.  **å¯åŠ¨åç«¯ Worker (Hono):**
    åœ¨ `steam-judger-backend` é¡¹ç›®ä¸‹è¿è¡Œï¼š
    ```bash
    pnpm run dev
    ```
    Wrangler ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œé€šå¸¸ç›‘å¬ `http://localhost:8787`ã€‚

2.  **å¯åŠ¨å‰ç«¯åº”ç”¨ (Nuxt):**
    åœ¨ `steam-judger` é¡¹ç›®ä¸‹è¿è¡Œï¼š
    ```bash
    pnpm run dev
    ```
    Nuxt ä¼šå¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ï¼Œé€šå¸¸ç›‘å¬ `http://localhost:3000`ã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­¤åœ°å€ã€‚

## â˜ï¸ éƒ¨ç½²åˆ° Cloudflare

1.  **éƒ¨ç½²åç«¯ Worker:**
    åœ¨ `backend/` ç›®å½•ä¸‹è¿è¡Œï¼š
    ```bash
    pnpm run deploy
    ```
    Wrangler ä¼šå°†ä½ çš„ Hono åº”ç”¨éƒ¨ç½²åˆ° Cloudflare Workersã€‚ç¡®ä¿ä½ å·²ç»åœ¨ Cloudflare Dashboard é…ç½®äº† Secrets å’Œ KV Namespaceã€‚è®°ä¸‹éƒ¨ç½²åçš„ Worker URLã€‚

2.  **éƒ¨ç½²å‰ç«¯ Nuxt åº”ç”¨:**
    *   å°†ä½ çš„ä»£ç æ¨é€åˆ° Git ä»“åº“ (GitHub, GitLab ç­‰)ã€‚
    *   ç™»å½• Cloudflare Dashboardï¼Œå¯¼èˆªåˆ° Workers & Pages -> Create application -> Pages -> Connect to Gitã€‚
    *   é€‰æ‹©ä½ çš„ä»“åº“å’Œåˆ†æ”¯ã€‚
    *   é…ç½®æ„å»ºè®¾ç½®ï¼š
        *   **Framework preset:** Nuxt
        *   **Build command:** `pnpm run build` (æˆ– `npm run build`)
        *   **Build output directory:** `.output/public`
    *   (å¯é€‰) é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ `NUXT_PUBLIC_API_BASE_URL` æŒ‡å‘ä½ éƒ¨ç½²çš„ Worker URLã€‚
    *   ç‚¹å‡» "Save and Deploy"ã€‚

## ğŸ® ä½¿ç”¨æ–¹æ³•

1.  è®¿é—®éƒ¨ç½²å¥½çš„å‰ç«¯åº”ç”¨ URLã€‚
2.  åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„ 64 ä½ Steam IDã€‚
3.  ç‚¹å‡»æäº¤æŒ‰é’®ã€‚
4.  åº”ç”¨ä¼šé¦–å…ˆè°ƒç”¨åç«¯ `/games/:steamid` æ¥å£è·å–æˆ–æ£€æŸ¥ç¼“å­˜çš„æ¸¸æˆæ•°æ®ã€‚
5.  ç„¶åè°ƒç”¨ `/analyze/data/:dataId` æ¥å£ã€‚
6.  AI ç”Ÿæˆçš„é”è¯„ä¼šæµå¼æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚

## ğŸ“ API ç«¯ç‚¹ (åç«¯)

*   `GET /games/:steamid`
    *   æ¥æ”¶ 64 ä½ Steam ID ä½œä¸ºè·¯å¾„å‚æ•°ã€‚
    *   æ£€æŸ¥ KV ç¼“å­˜ã€‚å¦‚æœå‘½ä¸­ä¸”æœªè¿‡æœŸï¼Œè¿”å›ç¼“å­˜æ•°æ®çš„ ID (`dataId`)ã€‚
    *   å¦‚æœæœªå‘½ä¸­æˆ–å·²è¿‡æœŸï¼Œè°ƒç”¨ Steam API è·å–æœ€æ–°æ•°æ®ï¼Œå­˜å…¥ KV (7 å¤© TTL)ï¼Œå¹¶è¿”å›æ–°æ•°æ®çš„ ID (`dataId`)ã€‚
    *   **å“åº”ç¤ºä¾‹ (ç¼“å­˜å‘½ä¸­):** `{ "dataId": "steamgames:76561198...", "source": "cache" }`
    *   **å“åº”ç¤ºä¾‹ (API è·å–):** `{ "dataId": "steamgames:76561198...", "source": "api", "gamesFound": 150 }`

*   `GET /analyze/data/:dataId`
    *   æ¥æ”¶ `/games` æ¥å£è¿”å›çš„ `dataId` ä½œä¸ºè·¯å¾„å‚æ•°ã€‚
    *   ä» KV ä¸­è·å– `dataId` å¯¹åº”çš„æ¸¸æˆæ•°æ®ã€‚
    *   å¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œè¿”å› 404ã€‚
    *   è°ƒç”¨é…ç½®çš„ AI å¤§æ¨¡å‹ï¼ˆå¦‚ DeepSeekï¼‰ç”Ÿæˆåˆ†æè¯„ä»·ã€‚
    *   é€šè¿‡ `text/event-stream` æµå¼è¿”å› AI ç”Ÿæˆçš„å†…å®¹ã€‚

*   `GET /model`
    *   è¿”å›å½“å‰åç«¯é…ç½®ç”¨äºåˆ†æçš„ AI æ¨¡å‹åç§°ã€‚
    *   **å“åº”ç¤ºä¾‹:** `{ "modelName": "deepseek-chat" }`

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Pull Requests æˆ–åˆ›å»º Issues æ¥æ”¹è¿›é¡¹ç›®ï¼

##ğŸ“„ License

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE)ã€‚

